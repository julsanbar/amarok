<div class="container-fluid tabla-fluid">
  <div class="row">
    <nav class="navbar navbar-expand-lg nuevo">
      <div class="container-fluid">

        <div> 
          <button class="btn btn-outline-primary" type="button" data-bs-toggle="modal" data-bs-target="#nuevo">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
              <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"/>
            </svg>
            Nuevo producto
          </button>        
        </div>

      </div>
    </nav>
  </div>

  <div class="row">
    <div class="col-md-12 offset-md-0 customTabla">
      <table class="table table-hover">
        <thead>
          <tr>

            <th class="text-center">REFERENCIA</th>
            <th class="text-center">NOMBRE</th>
            <th class="text-center">STOCK</th>
            <th class="text-center">STOCK MÍNIMO</th>
            <th class="text-center">HABILITADO</th>
            <th class="text-center">PROVEEDORES</th>
            <th class="text-center">PEDIDOS</th>
            <th class="text-center">VER MÁS</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of this.productos | paginate: { itemsPerPage: perPage, currentPage: page, totalItems: total }; 
              let i = index;trackBy: trackByItems" [ngSwitch]="item.habilitado" [ngClass]="{agotado: item.stock <= item.stockMinimo}">

            <td class="text-center">{{item.referencia}}</td>
            <td class="text-center">{{item.nombre}}</td>
            <td class="text-center">{{item.stock}}</td>
            <td class="text-center">{{item.stockMinimo}}</td>

            <ng-container *ngSwitchCase="true">

              <td class="text-center">

                  <button type="button" class="btn btn-outline-success border-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">
                      <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                      <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>
                    </svg>
                  </button>

              </td>

            </ng-container>

            <ng-container *ngSwitchCase="false">

              <td class="text-center">

                  <button type="button" class="btn btn-outline-success border-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">
                      <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                    </svg>
                  </button>

              </td>

            </ng-container>

            <td class="text-center">

              <button type="button" class="btn btn-outline-dark border-0" data-bs-toggle="modal" 
                data-bs-target="#proveedores" (click)="this.cargarProveedores(item.proveedores)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-shop" viewBox="0 0 16 16">
                  <path d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z"/>
                </svg>
              </button>

            </td>

            <td class="text-center">
              
              <button type="button" class="btn btn-outline-dark border-0" data-bs-toggle="modal" 
                data-bs-target="#pedidos" (click)="this.cargarPedidos(item.referencia)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-box-seam" viewBox="0 0 16 16">
                  <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
                </svg>
              </button>

            </td>

            <td class="text-center">

              <button type="button" class="btn btn-outline-dark border-0" data-bs-toggle="modal" data-bs-target="#edita">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-box-arrow-up-right" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z"/>
                    <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z"/>
                </svg>
              </button>

            </td>
            
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td class="text-center clearfix" colspan="8">
              <pagination-controls [previousLabel]="'Anterior'" [nextLabel]="'Siguiente'"
                (pageChange)="pageChanged($event)">
              </pagination-controls>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

</div>

<!-- Modal NUEVO PRODUCTO-->
<div class="modal fade" id="nuevo" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
aria-labelledby="staticBackdropLabel" aria-hidden="true">
<div class="modal-dialog modal-xl">
  <div class="modal-content">
    <div class="modal-header cabeceraCancelado">
      <button type="button" class="btn-close btn-outline-danger" (click)="this.refresh()" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">
        
        <app-nuevo-producto></app-nuevo-producto>

      </div>
    </div>
    <div class="modal-footer pieCancelado">
      <button type="button" class="btn btn-outline-danger mx-auto" (click)="this.refresh()" data-bs-dismiss="modal">Cerrar</button>
    </div>
  </div>
</div>
</div>

<!-- Modal PROVEEDORES PRODUCTO-->
<div class="modal fade" id="proveedores" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
aria-labelledby="staticBackdropLabel" aria-hidden="true">
<div class="modal-dialog modal-xl">
  <div class="modal-content">
    <div class="modal-header cabeceraCancelado">
      <button type="button" class="btn-close btn-outline-danger" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid contenido-tabla">
        
        <app-proveedores-producto [proveedores]="this.proveedores"></app-proveedores-producto>

      </div>
    </div>
    <div class="modal-footer pieCancelado">
      <button type="button" class="btn btn-outline-danger mx-auto" data-bs-dismiss="modal">Cerrar</button>
    </div>
  </div>
</div>
</div>

<!-- Modal PEDIDOS PRODUCTO-->
<div class="modal fade" id="pedidos" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
aria-labelledby="staticBackdropLabel" aria-hidden="true">
<div class="modal-dialog modal-xl">
  <div class="modal-content">
    <div class="modal-header cabeceraCancelado">
      <button type="button" class="btn-close btn-outline-danger" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid contenido-tabla">
        
        <app-pedidos-producto [pedidos]="this.pedidos" ></app-pedidos-producto>

      </div>
    </div>
    <div class="modal-footer pieCancelado">
      <button type="button" class="btn btn-outline-danger mx-auto" data-bs-dismiss="modal">Cerrar</button>
    </div>
  </div>
</div>
</div>